{
  "query": "CREATE TABLE IF NOT EXISTS email_logs (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  user_id INT NOT NULL,\n  entity_type VARCHAR(50) NOT NULL COMMENT 'customer, vendor, lead, contact',\n  entity_id INT NOT NULL,\n  subject VARCHAR(500),\n  body_preview TEXT,\n  full_body LONGTEXT,\n  direction VARCHAR(20) NOT NULL COMMENT 'sent, received',\n  from_email VARCHAR(320),\n  to_emails JSON COMMENT 'Array of recipient emails',\n  cc_emails JSON,\n  bcc_emails JSON,\n  thread_id VARCHAR(255) COMMENT 'Email thread identifier',\n  message_id VARCHAR(255) COMMENT 'Unique message ID',\n  in_reply_to VARCHAR(255),\n  sent_at TIMESTAMP NOT NULL,\n  visibility VARCHAR(20) DEFAULT 'private' COMMENT 'private, public, shared',\n  shared_with_users JSON COMMENT 'Array of user IDs who can view this email',\n  has_attachments BOOLEAN DEFAULT FALSE,\n  attachment_count INT DEFAULT 0,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\n  INDEX idx_entity (entity_type, entity_id),\n  INDEX idx_thread (thread_id),\n  INDEX idx_sent_at (sent_at),\n  INDEX idx_visibility (visibility)\n)",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user tzGyVcj9oHnaUv9.3cfa47fa1e17 --database bQwuvX7ycRD88MLXJHLZXd --execute CREATE TABLE IF NOT EXISTS email_logs (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  user_id INT NOT NULL,\n  entity_type VARCHAR(50) NOT NULL COMMENT 'customer, vendor, lead, contact',\n  entity_id INT NOT NULL,\n  subject VARCHAR(500),\n  body_preview TEXT,\n  full_body LONGTEXT,\n  direction VARCHAR(20) NOT NULL COMMENT 'sent, received',\n  from_email VARCHAR(320),\n  to_emails JSON COMMENT 'Array of recipient emails',\n  cc_emails JSON,\n  bcc_emails JSON,\n  thread_id VARCHAR(255) COMMENT 'Email thread identifier',\n  message_id VARCHAR(255) COMMENT 'Unique message ID',\n  in_reply_to VARCHAR(255),\n  sent_at TIMESTAMP NOT NULL,\n  visibility VARCHAR(20) DEFAULT 'private' COMMENT 'private, public, shared',\n  shared_with_users JSON COMMENT 'Array of user IDs who can view this email',\n  has_attachments BOOLEAN DEFAULT FALSE,\n  attachment_count INT DEFAULT 0,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,\n  INDEX idx_entity (entity_type, entity_id),\n  INDEX idx_thread (thread_id),\n  INDEX idx_sent_at (sent_at),\n  INDEX idx_visibility (visibility)\n)",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 260
}